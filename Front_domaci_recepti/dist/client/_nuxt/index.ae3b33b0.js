import{a as v}from"./axios.4d564c32.js";import{_ as h,n as f,c as n,a as o,x as m,y as c,q as u,b as k,v as g,o as p,p as b,e as x}from"./entry.d256b9ad.js";const y={data(){return{nazivRecepta:"",opis:"",slika:null,vrstaJela:null,slikaTooLarge:!1,slikaInvalidFormat:!1}},methods:{handleFileUpload(a){const e=a.target.files[0],i=5*1024*1024,d=["image/jpeg","image/png","image/webp"];if(e){if(e.size>i){this.slikaTooLarge=!0,this.slikaInvalidFormat=!1;return}if(!d.includes(e.type)){this.slikaInvalidFormat=!0,this.slikaTooLarge=!1;return}this.slikaTooLarge=!1,this.slikaInvalidFormat=!1,this.slika=e}},submitForm(){const a=new FormData;a.append("naziv_recepta",this.nazivRecepta),a.append("opis",this.opis),a.append("slika",this.slika),a.append("vrstajela",this.vrstaJela);const e=document.cookie.replace(/(?:(?:^|.*;\s*)authToken\s*=\s*([^;]*).*$)|^.*$/,"$1");v.post("http://localhost:8000/api/recepti",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}}).then(()=>{this.$router.push("/mojirecepti")}).catch(i=>{console.error("Došlo je do greške prilikom spremanja recepta:",i)})}}},r=a=>(b("data-v-b939f766"),a=a(),x(),a),F={id:"app"},z=r(()=>o("h2",null,"Dodaj novi recept",-1)),T={class:"form-group"},j=r(()=>o("label",{for:"naziv_recepta"},"Naziv recepta:",-1)),I={class:"form-group"},V=r(()=>o("label",{for:"opis"},"Opis:",-1)),S={class:"form-group"},w=r(()=>o("label",{for:"slika"},"Slika:",-1)),D={key:0,style:{color:"red"}},L={key:1,style:{color:"red"}},U={class:"form-group"},q=["disabled"];function B(a,e,i,d,s,l){const _=f("v-combobox");return p(),n("div",F,[z,o("form",{onSubmit:e[4]||(e[4]=g((...t)=>l.submitForm&&l.submitForm(...t),["prevent"]))},[o("div",T,[j,m(o("input",{type:"text",id:"naziv_recepta","onUpdate:modelValue":e[0]||(e[0]=t=>s.nazivRecepta=t),maxlength:"60",required:""},null,512),[[c,s.nazivRecepta]])]),o("div",I,[V,m(o("textarea",{id:"opis","onUpdate:modelValue":e[1]||(e[1]=t=>s.opis=t),maxlength:"1000",required:""},null,512),[[c,s.opis]])]),o("div",S,[w,o("input",{type:"file",id:"slika",onChange:e[2]||(e[2]=(...t)=>l.handleFileUpload&&l.handleFileUpload(...t)),accept:"image/*",required:""},null,32),s.slikaTooLarge?(p(),n("span",D,"Slika je prevelika (max 5 MB)")):u("",!0),s.slikaInvalidFormat?(p(),n("span",L,"Neispravan format slike")):u("",!0)]),o("div",U,[k(_,{label:"Vrsta jela",modelValue:s.vrstaJela,"onUpdate:modelValue":e[3]||(e[3]=t=>s.vrstaJela=t),items:["Glavno jelo","Predjelo","Desert"],required:""},null,8,["modelValue"])]),o("button",{type:"submit",disabled:s.slikaTooLarge||s.slikaInvalidFormat},"Spremi recept",8,q)],32)])}const J=h(y,[["render",B],["__scopeId","data-v-b939f766"]]);export{J as default};
