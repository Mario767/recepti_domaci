import{C as b,a as k}from"./accountStore.3470eac0.js";import{_ as y,o as n,c as r,a as e,t as i,d as u,F as p,u as _,A as v,B as S,q as f,x as K,y as z,v as C,p as I,e as w}from"./entry.f05f5772.js";import{a as j}from"./axios.4d564c32.js";const g=new b,B={props:{recept:{type:Object,required:!0}},data(){return{noviKomentar:"",ocjena:0,stars:Array(5).fill("far fa-star"),rating:0}},methods:{setRating(t){this.rating=t,this.stars=this.stars.map((a,o)=>o<t?"fas fa-star":o<t?"fas fa-star-half-alt":"far fa-star")},submitRating(t){const a=g.get("authToken");j.post("http://pzi202024.studenti.sum.ba/backend/api/ocjena",{recept_id:this.recept.recept_id,ocjena:t},{headers:{Authorization:`Bearer ${a}`}}).then(()=>{this.ocjena=t,alert("Uspješno dodana ocjena!")}).catch(o=>{console.error(o)})},submitKomentar(){const t=g.get("authToken");j.post("http://pzi202024.studenti.sum.ba/backend/api/komentari",{idrecepta:this.recept.recept_id,sadržaj:this.noviKomentar},{headers:{Authorization:`Bearer ${t}`}}).then(()=>{this.noviKomentar="",alert("Uspješno dodan komentar!")}).catch(a=>{console.error(a)})}}},m=t=>(I("data-v-7e654cdc"),t=t(),w(),t),T={class:"recept-container"},x={class:"naslov"},M=m(()=>e("hr",{style:{height:"1px",color:"black",width:"100%"}},null,-1)),R={class:"slika-container"},A=["src"],F={class:"opis"},O={class:"ocjene"},U={key:0,class:"fas fa-star"},V={key:1,class:"far fa-star"},L={key:0},N={class:"star-rating"},q=["onMouseover","onClick"],D={key:0,class:"pisanjeKomentara"},P=m(()=>e("br",null,null,-1)),E=m(()=>e("button",{type:"submit",class:"komentarSend"},"Pošalji komentar",-1)),G={class:"komKorIme"};function H(t,a,o,J,l,c){return n(),r("div",T,[e("h1",x,i(o.recept.naziv_recepta),1),M,e("div",R,[e("img",{src:"http://pzi202024.studenti.sum.ba/backend/"+o.recept.slika,alt:"Slika recepta"},null,8,A)]),e("h2",F,i(o.recept.opis),1),e("div",O,[e("p",null,[u("Prosječna ocjena: "),(n(),r(p,null,_(5,s=>e("span",{key:s,class:"star"},[s<=o.recept.prosjecnaOcjena?(n(),r("i",U)):(n(),r("i",V))])),64)),u("  "),e("span",null,i(o.recept.prosjecnaOcjena.toFixed(1)),1)]),("accountStore"in t?t.accountStore:v(k)).getters.isLoggedIn()?(n(),r("div",L,[e("p",null,[u("Ocijenite recept: "),e("div",N,[(n(!0),r(p,null,_(l.stars,(s,d)=>(n(),r("span",{key:d,class:"star",onMouseover:h=>c.setRating(d+1),onMouseout:a[0]||(a[0]=h=>c.setRating(l.rating)),onClick:h=>c.submitRating(d+1)},[e("i",{class:S([s,"star-mar"])},null,2)],40,q))),128))])])])):f("",!0)]),("accountStore"in t?t.accountStore:v(k)).getters.isLoggedIn()?(n(),r("div",D,[e("form",{onSubmit:a[2]||(a[2]=C((...s)=>c.submitKomentar&&c.submitKomentar(...s),["prevent"]))},[K(e("textarea",{class:"komentarField","onUpdate:modelValue":a[1]||(a[1]=s=>l.noviKomentar=s),placeholder:"Unesite svoj komentar ovdje"},null,512),[[z,l.noviKomentar]]),P,E],32)])):f("",!0),(n(!0),r(p,null,_(o.recept.komentari,s=>(n(),r("div",{key:s.datum_Komentara,class:"komentar"},[e("p",G,i(s.korisnicko_ime),1),e("p",null,i(s.sadržaj),1),e("p",null,i(s.datum_Komentara),1)]))),128))])}const Y=y(B,[["render",H],["__scopeId","data-v-7e654cdc"]]);export{Y as _};
