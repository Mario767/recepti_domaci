import{C as v,a as l}from"./accountStore.3470eac0.js";import{a as u}from"./axios.4d564c32.js";import{_ as k,o as c,c as n,F as f,u as b,a,t as g,v as h,b as y,q as d}from"./entry.c439460d.js";const R=new v,I={props:{recepti:{type:Array,required:!0}},methods:{getImageUrl(r){return"http://127.0.0.1:8000/"+r},goToRecept(r){let t=r.naziv_recepta.replace(/\s+/g,"_");this.$router.push({path:`/Recepti/${t}`}),l.actions.setReceptId(r.recept_id)},deleteRecept(r){const t=R.get("authToken");u.post("http://127.0.0.1:8000/api/obrisirec",{recept_id:r},{headers:{Authorization:`Bearer ${t}`}}).then(o=>{console.log("Recept je uspješno izbrisan:",o),this.$emit("recept-izbrisan")}).catch(o=>{console.error("Došlo je do pogreške prilikom brisanja recepta:",o)})},editRecept(r){l.actions.setReceptId(r),this.$router.push({path:"/uredirecept"})}}},C={class:"card-recepti"},x=["onClick"],z=["src"],$={class:"card-body"},D={class:"card-title"},A={class:"card-buttons"},N=["onClick"],T=["onClick"];function j(r,t,o,p,e,s){return c(),n("div",C,[(c(!0),n(f,null,b(o.recepti,i=>(c(),n("div",{key:i.recept_id,class:"card card-hover",onClick:_=>s.goToRecept(i)},[a("img",{src:s.getImageUrl(i.slika),alt:"Recept slika"},null,8,z),a("div",$,[a("h5",D,g(i.naziv_recepta),1)]),a("div",A,[a("button",{class:"delete-button",onClick:h(_=>s.deleteRecept(i.recept_id),["stop"])},"Izbriši",8,N),a("button",{class:"edit-button",onClick:h(_=>s.editRecept(i.recept_id),["stop"])},"Uredi",8,T)])],8,x))),128))])}const m=k(I,[["render",j],["__scopeId","data-v-5514cd51"]]);u.defaults.baseURL="http://127.0.0.1:8000/";const B={components:{Adminrec:m},data(){return{recepti:null,error:null}},mounted(){this.fetchData(1)},methods:{fetchData(r){const t=document.cookie.replace(/(?:(?:^|.*;\s*)authToken\s*=\s*([^;]*).*$)|^.*$/,"$1");let o=l.state.korinsikId;typeof sessionStorage<"u"&&(o=o||sessionStorage.getItem("korinsikId")),u.get(`http://127.0.0.1:8000/api/receptikorisnika/${o}?page=${r}`,{headers:{Authorization:`Bearer ${t}`}}).then(p=>{this.recepti=p.data}).catch(p=>{this.error="Došlo je do greške prilikom dohvata recepata: "+p.message})}}},S={id:"app"},U={class:"pagination"},V={key:0},q={key:1};function w(r,t,o,p,e,s){const i=m;return c(),n("div",S,[y(i,{recepti:e.recepti?e.recepti.data:[],onReceptIzbrisan:t[0]||(t[0]=_=>s.fetchData(e.recepti.current_page))},null,8,["recepti"]),a("div",U,[e.recepti&&e.recepti.current_page>1?(c(),n("button",{key:0,class:"pagination-button",onClick:t[1]||(t[1]=_=>s.fetchData(e.recepti.current_page-1))},"Previous")):d("",!0),e.recepti&&e.recepti.last_page>e.recepti.current_page?(c(),n("button",{key:1,class:"pagination-button",onClick:t[2]||(t[2]=_=>s.fetchData(e.recepti.current_page+1))},"Next")):d("",!0)]),e.error?(c(),n("p",V,g(e.error),1)):e.recepti&&!e.recepti.data.length?(c(),n("p",q,"Nema kreiranih recepata.")):d("",!0)])}const M=k(B,[["render",w],["__scopeId","data-v-a394fa2e"]]);export{M as default};
