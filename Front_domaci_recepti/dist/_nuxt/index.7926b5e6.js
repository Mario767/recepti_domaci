import{C as b,a as u}from"./accountStore.3470eac0.js";import{a as _}from"./axios.4d564c32.js";import{_ as h,o as n,c as a,F as v,u as f,a as i,t as m,v as l,b as y,q as d}from"./entry.e952e3f2.js";const z=new b,R={props:{recepti:{type:Array,required:!0}},methods:{getImageUrl(r){return"http://pzi202024.studenti.sum.ba/backend/"+r},goToRecept(r){let e=r.naziv_recepta.replace(/\s+/g,"_");this.$router.push({path:`/News/${e}`}),u.actions.setReceptId(r.recept_id)},deleteRecept(r){const e=z.get("authToken");_.post("http://pzi202024.studenti.sum.ba/backend/api/obrisirec",{recept_id:r},{headers:{Authorization:`Bearer ${e}`}}).then(o=>{console.log("Recept je uspješno izbrisan:",o),this.$emit("recept-izbrisan")}).catch(o=>{console.error("Došlo je do pogreške prilikom brisanja recepta:",o)})},editRecept(r){u.actions.setReceptId(r),this.$router.push({path:"/uredirecept"})}}},x={class:"card-recepti"},C=["onClick"],j=["src"],$={class:"card-body"},D={class:"card-title"},I={class:"card-buttons"},N=["onClick"],T=["onClick"];function B(r,e,o,g,t,s){return n(),a("div",x,[(n(!0),a(v,null,f(o.recepti,c=>(n(),a("div",{key:c.recept_id,class:"card card-hover",onClick:p=>s.goToRecept(c)},[i("img",{src:s.getImageUrl(c.slika),alt:"Recept slika"},null,8,j),i("div",$,[i("h5",D,m(c.naziv_recepta),1)]),i("div",I,[i("button",{class:"delete-button",onClick:l(p=>s.deleteRecept(c.recept_id),["stop"])},"Izbriši",8,N),i("button",{class:"edit-button",onClick:l(p=>s.editRecept(c.recept_id),["stop"])},"Uredi",8,T)])],8,C))),128))])}const k=h(R,[["render",B],["__scopeId","data-v-0a09e42d"]]);_.defaults.baseURL="http://pzi202024.studenti.sum.ba/backend/";const M={components:{Mojirec:k},data(){return{recepti:null,error:null}},mounted(){this.fetchData(1)},methods:{fetchData(r){const e=document.cookie.replace(/(?:(?:^|.*;\s*)authToken\s*=\s*([^;]*).*$)|^.*$/,"$1");_.get(`api/mojirecepti?page=${r}`,{headers:{Authorization:`Bearer ${e}`}}).then(o=>{this.recepti=o.data}).catch(o=>{this.error="Došlo je do greške prilikom dohvata recepata: "+o.message})}}},U={id:"app"},w={class:"pagination"},A={key:0};function V(r,e,o,g,t,s){const c=k;return n(),a("div",U,[y(c,{recepti:t.recepti?t.recepti.data:[],onReceptIzbrisan:e[0]||(e[0]=p=>s.fetchData(t.recepti.current_page))},null,8,["recepti"]),i("div",w,[t.recepti&&t.recepti.current_page>1?(n(),a("button",{key:0,class:"pagination-button",onClick:e[1]||(e[1]=p=>s.fetchData(t.recepti.current_page-1))},"Previous")):d("",!0),t.recepti&&t.recepti.last_page>t.recepti.current_page?(n(),a("button",{key:1,class:"pagination-button",onClick:e[2]||(e[2]=p=>s.fetchData(t.recepti.current_page+1))},"Next")):d("",!0)]),t.error?(n(),a("p",A,m(t.error),1)):d("",!0)])}const S=h(M,[["render",V],["__scopeId","data-v-ddbd46c6"]]);export{S as default};
