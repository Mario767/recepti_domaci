import{a as _}from"./axios.4d564c32.js";import{_ as h,n as f,c as l,a as o,x as u,y as c,t as k,q as d,b as g,v as b,o as n,p as y,e as x}from"./entry.e952e3f2.js";const z={data(){return{nazivRecepta:"",opis:"",slika:null,vrstaJela:null,slikaTooLarge:!1,slikaInvalidFormat:!1,opisError:""}},methods:{handleFileUpload(s){const e=s.target.files[0],i=5*1024*1024,m=["image/jpeg","image/png","image/webp"];if(e){if(e.size>i){this.slikaTooLarge=!0,this.slikaInvalidFormat=!1;return}if(!m.includes(e.type)){this.slikaInvalidFormat=!0,this.slikaTooLarge=!1;return}this.slikaTooLarge=!1,this.slikaInvalidFormat=!1,this.slika=e}},async submitForm(){if(this.opis.length>1e3){this.opisError="Ne možete unijetieti više od 1000 znakova za opis";return}const s=new FormData;s.append("naziv_recepta",this.nazivRecepta),s.append("opis",this.opis),s.append("slika",this.slika),s.append("vrstajela",this.vrstaJela);const e=document.cookie.replace(/(?:(?:^|.*;\s*)authToken\s*=\s*([^;]*).*$)|^.*$/,"$1");try{await _.post("http://pzi202024.studenti.sum.ba/backend/api/recepti",s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}}),this.$router.push("/mojirecepti")}catch(i){i.response&&i.response.status===422?this.opisError="Ne možete uneti više od 1000 znakova za opis":console.error("Došlo je do greške prilikom spremanja recepta:",i)}}}},p=s=>(y("data-v-5a382a5f"),s=s(),x(),s),F={id:"app"},j=p(()=>o("h2",null,"Dodaj novi recept",-1)),T={class:"form-group"},I=p(()=>o("label",{for:"naziv_recepta"},"Naziv recepta:",-1)),S={class:"form-group"},V=p(()=>o("label",{for:"opis"},"Opis:",-1)),w={key:0,style:{color:"red"}},D={class:"form-group"},N=p(()=>o("label",{for:"slika"},"Slika:",-1)),E={key:0,style:{color:"red"}},L={key:1,style:{color:"red"}},U={class:"form-group"},q=["disabled"];function B(s,e,i,m,t,r){const v=f("v-combobox");return n(),l("div",F,[j,o("form",{onSubmit:e[4]||(e[4]=b((...a)=>r.submitForm&&r.submitForm(...a),["prevent"]))},[o("div",T,[I,u(o("input",{type:"text",id:"naziv_recepta","onUpdate:modelValue":e[0]||(e[0]=a=>t.nazivRecepta=a),maxlength:"60",required:""},null,512),[[c,t.nazivRecepta]])]),o("div",S,[V,u(o("textarea",{id:"opis","onUpdate:modelValue":e[1]||(e[1]=a=>t.opis=a),maxlength:"1000",required:""},null,512),[[c,t.opis]]),t.opisError?(n(),l("span",w,k(t.opisError),1)):d("",!0)]),o("div",D,[N,o("input",{type:"file",id:"slika",onChange:e[2]||(e[2]=(...a)=>r.handleFileUpload&&r.handleFileUpload(...a)),accept:"image/*",required:""},null,32),t.slikaTooLarge?(n(),l("span",E,"Slika je prevelika (max 5 MB)")):d("",!0),t.slikaInvalidFormat?(n(),l("span",L,"Neispravan format slike")):d("",!0)]),o("div",U,[g(v,{label:"Vrsta jela",modelValue:t.vrstaJela,"onUpdate:modelValue":e[3]||(e[3]=a=>t.vrstaJela=a),items:["Glavno jelo","Predjelo","Desert"],required:""},null,8,["modelValue"])]),o("button",{type:"submit",disabled:t.slikaTooLarge||t.slikaInvalidFormat},"Spremi recept",8,q)],32)])}const R=h(z,[["render",B],["__scopeId","data-v-5a382a5f"]]);export{R as default};
