import{C as b,a as u}from"./accountStore.3470eac0.js";import{a as l}from"./axios.4d564c32.js";import{_ as k,o as c,c as n,F as v,u as f,a,t as m,v as h,b as y,q as _}from"./entry.f05f5772.js";const z=new b,R={props:{recepti:{type:Array,required:!0}},methods:{getImageUrl(r){return"http://pzi202024.studenti.sum.ba/backend/"+r},goToRecept(r){let t=r.naziv_recepta.replace(/\s+/g,"_");this.$router.push({path:`/Recepti/${t}`}),u.actions.setReceptId(r.recept_id)},deleteRecept(r){const t=z.get("authToken");l.post("http://pzi202024.studenti.sum.ba/backend/api/obrisirec",{recept_id:r},{headers:{Authorization:`Bearer ${t}`}}).then(s=>{console.log("Recept je uspješno izbrisan:",s),this.$emit("recept-izbrisan")}).catch(s=>{console.error("Došlo je do pogreške prilikom brisanja recepta:",s)})},editRecept(r){u.actions.setReceptId(r),this.$router.push({path:"/uredirecept"})}}},I={class:"card-recepti"},C=["onClick"],x=["src"],$={class:"card-body"},D={class:"card-title"},A={class:"card-buttons"},N=["onClick"],T=["onClick"];function j(r,t,s,p,e,o){return c(),n("div",I,[(c(!0),n(v,null,f(s.recepti,i=>(c(),n("div",{key:i.recept_id,class:"card card-hover",onClick:d=>o.goToRecept(i)},[a("img",{src:o.getImageUrl(i.slika),alt:"Recept slika"},null,8,x),a("div",$,[a("h5",D,m(i.naziv_recepta),1)]),a("div",A,[a("button",{class:"delete-button",onClick:h(d=>o.deleteRecept(i.recept_id),["stop"])},"Izbriši",8,N),a("button",{class:"edit-button",onClick:h(d=>o.editRecept(i.recept_id),["stop"])},"Uredi",8,T)])],8,C))),128))])}const g=k(R,[["render",j],["__scopeId","data-v-e4f05c33"]]);l.defaults.baseURL="http://pzi202024.studenti.sum.ba/backend/";const B={components:{Adminrec:g},data(){return{recepti:null,error:null}},mounted(){this.fetchData(1)},methods:{fetchData(r){const t=document.cookie.replace(/(?:(?:^|.*;\s*)authToken\s*=\s*([^;]*).*$)|^.*$/,"$1");let s=u.state.korinsikId;typeof sessionStorage<"u"&&(s=s||sessionStorage.getItem("korinsikId")),l.get(`http://pzi202024.studenti.sum.ba/backend/api/receptikorisnika/${s}?page=${r}`,{headers:{Authorization:`Bearer ${t}`}}).then(p=>{this.recepti=p.data}).catch(p=>{this.error="Došlo je do greške prilikom dohvata recepata: "+p.message})}}},S={id:"app"},U={class:"pagination"},V={key:0},q={key:1};function w(r,t,s,p,e,o){const i=g;return c(),n("div",S,[y(i,{recepti:e.recepti?e.recepti.data:[],onReceptIzbrisan:t[0]||(t[0]=d=>o.fetchData(e.recepti.current_page))},null,8,["recepti"]),a("div",U,[e.recepti&&e.recepti.current_page>1?(c(),n("button",{key:0,class:"pagination-button",onClick:t[1]||(t[1]=d=>o.fetchData(e.recepti.current_page-1))},"Previous")):_("",!0),e.recepti&&e.recepti.last_page>e.recepti.current_page?(c(),n("button",{key:1,class:"pagination-button",onClick:t[2]||(t[2]=d=>o.fetchData(e.recepti.current_page+1))},"Next")):_("",!0)]),e.error?(c(),n("p",V,m(e.error),1)):e.recepti&&!e.recepti.data.length?(c(),n("p",q,"Nema kreiranih recepata.")):_("",!0)])}const M=k(B,[["render",w],["__scopeId","data-v-ada4d19d"]]);export{M as default};
