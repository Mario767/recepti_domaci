import{C as D,D as E,r as l,o as s,c as i,a as t,x as k,y as m,t as v,q as d,B as L,p as K,e as R,_ as N}from"./entry.f05f5772.js";import{a as w}from"./axios.4d564c32.js";const x=_=>(K("data-v-72eda729"),_=_(),R(),_),T={id:"app"},q={class:"login-container"},F=x(()=>t("h1",{class:"title"},"Domaći recepti",-1)),M={key:0},A={key:0,class:"error-message"},G={key:1,class:"error-message"},H={key:2,class:"error-message"},J={key:3,class:"error-message"},O={key:1},Q={key:0,class:"error-message"},W={key:1},X={key:2},Y={key:2},Z=x(()=>t("h2",null,"Uspješna registracija!",-1)),$=x(()=>t("p",null,"Bit ćete preusmjereni na stranicu za prijavu...",-1)),ee=[Z,$],ae={key:3,class:"error-message"},oe=D({__name:"index",setup(_){const U=E(),c=l(""),n=l(""),u=l(""),p=l(""),b=l(""),j=l(!1),C=l(""),f=l(!1),z=l(""),h=l(!1),g=l(""),a=l({korisnicko_ime:"",email:"",lozinka:"",potvrda_lozinke:"",confirmationCode:""});let y=null;const I=()=>{clearInterval(y);let e=180;y=setInterval(()=>{e>0?(e--,g.value=e):(clearInterval(y),g.value="")},1e3)},V=()=>{let e=!0;return c.value?c.value.length>40?(a.value.korisnicko_ime="Korisničko ime ne može biti duže od 40 znakova.",e=!1):a.value.korisnicko_ime="":(a.value.korisnicko_ime="Korisničko ime je obavezno.",e=!1),u.value?u.value.length>50?(a.value.email="Email ne može biti duži od 50 znakova.",e=!1):u.value.includes("@")?a.value.email="":(a.value.email="Email mora sadržavati @ znak.",e=!1):(a.value.email="Email je obavezan.",e=!1),n.value?n.value.length>50?(a.value.lozinka="Lozinka ne može biti duža od 50 znakova.",e=!1):n.value.length<6?(a.value.lozinka="Lozinka mora biti duža od 5 znakova.",e=!1):a.value.lozinka="":(a.value.lozinka="Lozinka je obavezna.",e=!1),p.value?p.value!==n.value?(a.value.potvrda_lozinke="Lozinke se moraju podudarati.",e=!1):a.value.potvrda_lozinke="":(a.value.potvrda_lozinke="Potvrda lozinke je obavezna.",e=!1),e},P=async()=>{if(V())try{const e=await w.post("http://pzi202024.studenti.sum.ba/backend/api/sendcode",{korisnicko_ime:c.value,email:u.value,lozinka:n.value,potvrda_lozinke:p.value});console.log(e),e.status===200&&(j.value=!0,I())}catch(e){if(e.response&&e.response.status===422){const{errors:o}=e.response.data;o.korisnicko_ime&&(a.value.korisnicko_ime=o.korisnicko_ime[0]),o.email&&(a.value.email=o.email[0]),o.lozinka&&(a.value.lozinka=o.lozinka[0]),o.potvrda_lozinke&&(a.value.potvrda_lozinke=o.potvrda_lozinke[0])}else C.value="Došlo je do greške. Pokušajte ponovno.";console.error(e)}},S=async()=>{try{const e=await w.post("http://pzi202024.studenti.sum.ba/backend/api/confirmcode",{confirmationCode:b.value,korisnicko_ime:c.value,lozinka:n.value,email:u.value});console.log(e),e.data.message==="Registracija uspješna!"?(f.value=!0,z.value="Registracija uspješna!",h.value=!0,clearInterval(y),setTimeout(()=>{U.push("/login")},2e3)):(a.value.confirmationCode=e.data.message,z.value=e.data.message,h.value=!0,setTimeout(()=>{h.value=!1},3e3))}catch(e){console.error(e),a.value.confirmationCode="Neispravan kod za potvrdu."}},B=async()=>{try{const e=await w.post("http://pzi202024.studenti.sum.ba/backend/api/sendcode",{korisnicko_ime:c.value,lozinka:n.value,email:u.value});console.log(e),e.status===200&&I()}catch(e){console.error(e)}};return(e,o)=>(s(),i("div",T,[t("div",q,[F,!j.value&&!f.value?(s(),i("div",M,[k(t("input",{class:"input-field",type:"text",placeholder:"Unesi korisničko ime","onUpdate:modelValue":o[0]||(o[0]=r=>c.value=r)},null,512),[[m,c.value]]),a.value.korisnicko_ime?(s(),i("p",A,v(a.value.korisnicko_ime),1)):d("",!0),k(t("input",{class:"input-field",type:"email",placeholder:"Unesi email","onUpdate:modelValue":o[1]||(o[1]=r=>u.value=r)},null,512),[[m,u.value]]),a.value.email?(s(),i("p",G,v(a.value.email),1)):d("",!0),k(t("input",{class:"input-field",type:"password",placeholder:"Unesi lozinku","onUpdate:modelValue":o[2]||(o[2]=r=>n.value=r)},null,512),[[m,n.value]]),a.value.lozinka?(s(),i("p",H,v(a.value.lozinka),1)):d("",!0),k(t("input",{class:"input-field",type:"password",placeholder:"Potvrdi lozinku","onUpdate:modelValue":o[3]||(o[3]=r=>p.value=r)},null,512),[[m,p.value]]),a.value.potvrda_lozinke?(s(),i("p",J,v(a.value.potvrda_lozinke),1)):d("",!0),t("button",{class:"register-button",onClick:P},"Registriraj se")])):j.value&&!f.value?(s(),i("div",O,[k(t("input",{class:"input-field",type:"text",placeholder:"Unesi kod za potvrdu","onUpdate:modelValue":o[4]||(o[4]=r=>b.value=r)},null,512),[[m,b.value]]),a.value.confirmationCode?(s(),i("p",Q,v(a.value.confirmationCode),1)):d("",!0),t("button",{class:"register-button",onClick:S},"Potvrdi kod"),t("button",{class:"register-button",onClick:B},"Ponovno pošalji kod"),g.value>0?(s(),i("p",W,"Kod ističe za: "+v(g.value)+" sekundi",1)):(s(),i("p",X,"Kod je istekao. Ponovno pošaljite kod za prijavu."))])):f.value?(s(),i("div",Y,ee)):d("",!0),C.value?(s(),i("p",ae,v(C.value),1)):d("",!0),z.value?(s(),i("div",{key:4,class:L({snackbar:!0,show:h.value})},v(z.value),3)):d("",!0)])]))}});const le=N(oe,[["__scopeId","data-v-72eda729"]]);export{le as default};
