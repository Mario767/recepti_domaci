{
  "resolvedId": "C:/Users/mario/Documents/Projekti web/Recepti/Front_domaci_recepti/pages/Register/index.vue?macro=true",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "<template>\n  <div id=\"app\">\n    <div class=\"login-container\">\n      <h1 class=\"title\">Domaći recepti</h1>\n      <div v-if=\"!showConfirmationCodeInput && !registrationSuccess\">\n        <input class=\"input-field\" type=\"text\" placeholder=\"Unesi korisničko ime\" v-model=\"korisnicko_ime\" />\n        <p v-if=\"errors.korisnicko_ime\" class=\"error-message\">{{ errors.korisnicko_ime }}</p>\n\n        <input class=\"input-field\" type=\"email\" placeholder=\"Unesi email\" v-model=\"email\" />\n        <p v-if=\"errors.email\" class=\"error-message\">{{ errors.email }}</p>\n\n        <input class=\"input-field\" type=\"password\" placeholder=\"Unesi lozinku\" v-model=\"lozinka\" />\n        <p v-if=\"errors.lozinka\" class=\"error-message\">{{ errors.lozinka }}</p>\n\n        <input class=\"input-field\" type=\"password\" placeholder=\"Potvrdi lozinku\" v-model=\"potvrda_lozinke\" />\n        <p v-if=\"errors.potvrda_lozinke\" class=\"error-message\">{{ errors.potvrda_lozinke }}</p>\n\n        <button class=\"register-button\" @click=\"sendConfirmationCode\">Registriraj se</button>\n      </div>\n      <div v-else-if=\"showConfirmationCodeInput && !registrationSuccess\">\n        <input class=\"input-field\" type=\"text\" placeholder=\"Unesi kod za potvrdu\" v-model=\"confirmationCode\" />\n        <p v-if=\"errors.confirmationCode\" class=\"error-message\">{{ errors.confirmationCode }}</p>\n        <button class=\"register-button\" @click=\"confirmCode\">Potvrdi kod</button>\n        <button class=\"register-button\" @click=\"resendConfirmationCode\">Ponovno pošalji kod</button>\n        <p v-if=\"preostaloVrijeme > 0\">Kod ističe za: {{ preostaloVrijeme }} sekundi</p>\n        <p v-else>Kod je istekao. Ponovno pošaljite kod za prijavu.</p>\n      </div>\n      <div v-else-if=\"registrationSuccess\">\n        <h2>Uspješna registracija!</h2>\n        <p>Bit ćete preusmjereni na stranicu za prijavu...</p>\n      </div>\n      <p v-if=\"greska\" class=\"error-message\">{{ greska }}</p>\n      <div v-if=\"obavijest\" :class=\"{ snackbar: true, show: showSnackbar }\">{{ obavijest }}</div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport axios from 'axios'\n\nconst router = useRouter()\n\nconst korisnicko_ime = ref('')\nconst lozinka = ref('')\nconst email = ref('')\nconst potvrda_lozinke = ref('')\nconst confirmationCode = ref('')\nconst showConfirmationCodeInput = ref(false)\nconst greska = ref('')\nconst registrationSuccess = ref(false)\nconst obavijest = ref('')\nconst showSnackbar = ref(false)\nconst preostaloVrijeme = ref('')\nconst errors = ref({\n  korisnicko_ime: '',\n  email: '',\n  lozinka: '',\n  potvrda_lozinke: '',\n  confirmationCode: '' // Dodali smo novo polje za grešku kod koda za potvrdu\n})\n\nlet countdownInterval = null\n\nconst startCountdown = () => {\n  clearInterval(countdownInterval); // Resetirajte odbrojavanje\n  let timeLeft = 180; // 3 minute\n  countdownInterval = setInterval(() => {\n    if (timeLeft > 0) {\n      timeLeft--;\n      preostaloVrijeme.value = timeLeft;\n    } else {\n      clearInterval(countdownInterval);\n      preostaloVrijeme.value = '';\n    }\n  }, 1000);\n}\n\nconst validateForm = () => {\n  let valid = true;\n\n  // Validacija za korisničko ime\n  if (!korisnicko_ime.value) {\n    errors.value.korisnicko_ime = 'Korisničko ime je obavezno.';\n    valid = false;\n  } else if (korisnicko_ime.value.length > 40) {\n    errors.value.korisnicko_ime = 'Korisničko ime ne može biti duže od 40 znakova.';\n    valid = false;\n  } else {\n    errors.value.korisnicko_ime = '';\n  }\n\n  // Validacija za email\n  if (!email.value) {\n    errors.value.email = 'Email je obavezan.';\n    valid = false;\n  } else if (email.value.length > 50) {\n    errors.value.email = 'Email ne može biti duži od 50 znakova.';\n    valid = false;\n  } else if (!email.value.includes('@')) {\n    errors.value.email = 'Email mora sadržavati @ znak.';\n    valid = false;\n  } else {\n    errors.value.email = '';\n  }\n\n  // Validacija za lozinku\n  if (!lozinka.value) {\n    errors.value.lozinka = 'Lozinka je obavezna.';\n    valid = false;\n  } else if (lozinka.value.length > 50) {\n    errors.value.lozinka = 'Lozinka ne može biti duža od 50 znakova.';\n    valid = false;\n  } else if (lozinka.value.length < 6) {\n    errors.value.lozinka = 'Lozinka mora biti duža od 5 znakova.';\n    valid = false;\n  } else {\n    errors.value.lozinka = '';\n  }\n\n  // Validacija za potvrdu lozinke\n  if (!potvrda_lozinke.value) {\n    errors.value.potvrda_lozinke = 'Potvrda lozinke je obavezna.';\n    valid = false;\n  } else if (potvrda_lozinke.value !== lozinka.value) {\n    errors.value.potvrda_lozinke = 'Lozinke se moraju podudarati.';\n    valid = false;\n  } else {\n    errors.value.potvrda_lozinke = '';\n  }\n\n  return valid;\n}\n\nconst sendConfirmationCode = async () => {\n  if (validateForm()) {\n    try {\n      const response = await axios.post('http://localhost:8000/api/sendcode', {\n        korisnicko_ime: korisnicko_ime.value,\n        email: email.value,\n        lozinka: lozinka.value,\n        potvrda_lozinke: potvrda_lozinke.value\n      })\n      console.log(response)\n      if (response.status === 200) {\n        showConfirmationCodeInput.value = true\n        startCountdown()\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 422) {\n        const { errors: serverErrors } = error.response.data;\n        // Postavite greske dobivene od servera u errors ref objekt\n        if (serverErrors.korisnicko_ime) {\n          errors.value.korisnicko_ime = serverErrors.korisnicko_ime[0];\n        }\n        if (serverErrors.email) {\n          errors.value.email = serverErrors.email[0];\n        }\n        if (serverErrors.lozinka) {\n          errors.value.lozinka = serverErrors.lozinka[0];\n        }\n        if (serverErrors.potvrda_lozinke) {\n          errors.value.potvrda_lozinke = serverErrors.potvrda_lozinke[0];\n        }\n      } else {\n        greska.value = 'Došlo je do greške. Pokušajte ponovno.';\n      }\n      console.error(error)\n    }\n  }\n}\n\nconst confirmCode = async () => {\n  try {\n    const response = await axios.post('http://localhost:8000/api/confirmcode', {\n      confirmationCode: confirmationCode.value,\n      korisnicko_ime: korisnicko_ime.value,\n      lozinka: lozinka.value,\n      email: email.value,\n    });\n    console.log(response);\n    if (response.data.message === 'Registracija uspješna!') {\n      registrationSuccess.value = true;\n      obavijest.value = 'Registracija uspješna!';\n      showSnackbar.value = true;\n      clearInterval(countdownInterval);\n      setTimeout(() => {\n        router.push('/login');\n      }, 2000); // Automatsko preusmjeravanje nakon 2 sekunde\n    } else {\n      // Postavite grešku za kod za potvrdu\n      errors.value.confirmationCode = response.data.message;\n      obavijest.value = response.data.message;\n      showSnackbar.value = true;\n      setTimeout(() => {\n        showSnackbar.value = false;\n      }, 3000); // Automatsko skrivanje obavijesti nakon 3 sekunde\n    }\n  } catch (error) {\n    console.error(error);\n    errors.value.confirmationCode = 'Neispravan kod za potvrdu.';\n  }\n};\n\nconst resendConfirmationCode = async () => {\n  try {\n    const response = await axios.post('http://localhost:8000/api/sendcode', {\n      korisnicko_ime: korisnicko_ime.value,\n      lozinka: lozinka.value,\n      email: email.value,\n    })\n    console.log(response)\n    if (response.status === 200) {\n      startCountdown()\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n</script>\n\n<style scoped>\nbody {\n  background-color: #FFA07A;\n}\n\n#app {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.login-container {\n  background-color: white;\n  padding: 20px;\n  border-radius: 10px;\n  width: 80%;\n  max-width: 500px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n}\n\n.title {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 1.5em;\n}\n\n.input-field {\n  width: 100%;\n  padding: 15px;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  border: 1px solid #ccc;\n  font-size: 1em;\n}\n\n.register-button {\n  width: 100%;\n  padding: 15px;\n  background-color: #FFA07A;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 1em;\n  margin-top: 10px;\n}\n\n.error-message {\n  color: red;\n}\n\n.snackbar {\n  visibility: hidden;\n  min-width: 250px;\n  margin-left: -125px;\n  background-color: #333;\n  color: #fff;\n  text-align: center;\n  border-radius: 2px;\n  padding: 16px;\n  position: fixed;\n  z-index: 1;\n  left: 50%;\n  bottom: 30px;\n  font-size: 17px;\n}\n\n.snackbar.show {\n  visibility: visible;\n  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\n  animation: fadein 0.5s, fadeout 0.5s 2.5s;\n}\n\n@-webkit-keyframes fadein {\n  from {bottom: 0; opacity: 0;} \n  to {bottom: 30px; opacity: 1;}\n}\n\n@keyframes fadein {\n  from {bottom: 0; opacity: 0;}\n  to {bottom: 30px; opacity: 1;}\n}\n\n@-webkit-keyframes fadeout {\n  from {bottom: 30px; opacity: 1;} \n  to {bottom: 0; opacity: 0;}\n}\n\n@keyframes fadeout {\n  from {bottom: 30px; opacity: 1;}\n  to {bottom: 0; opacity: 0;}\n}\n</style>\n",
      "start": 1719309434318,
      "end": 1719309434801,
      "sourcemaps": null
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "pre"
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "pre"
    },
    {
      "name": "nuxt:client-fallback-auto-id",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "pre"
    },
    {
      "name": "vite:css",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1719309434801,
      "end": 1719309434801,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": "import _sfc_main from \"C:/Users/mario/Documents/Projekti web/Recepti/Front_domaci_recepti/pages/Register/index.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"C:/Users/mario/Documents/Projekti web/Recepti/Front_domaci_recepti/pages/Register/index.vue?vue&type=script&setup=true&lang.ts\";\nimport \"C:/Users/mario/Documents/Projekti web/Recepti/Front_domaci_recepti/pages/Register/index.vue?vue&type=style&index=0&scoped=d3a2679e&lang.css\";\nimport { useSSRContext as __vite_useSSRContext } from \"vue\";\nconst _sfc_setup = _sfc_main.setup;\n_sfc_main.setup = (props, ctx) => {\n  const ssrContext = __vite_useSSRContext();\n  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add(\"pages/Register/index.vue\");\n  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;\n};\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-d3a2679e\"]]);\n",
      "start": 1719309434801,
      "end": 1719309437311,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "nuxt:components:imports",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "ssr-styles",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1719309437311,
      "end": 1719309437311,
      "order": "normal"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1719309437311,
      "end": 1719309437312,
      "order": "post"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1719309437311,
      "end": 1719309437312,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1719309437312,
      "end": 1719309437312,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1719309437312,
      "end": 1719309437312,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1719309437312,
      "end": 1719309437312,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1719309437312,
      "end": 1719309437312,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "result": "export { default } from \"C:/Users/mario/Documents/Projekti web/Recepti/Front_domaci_recepti/pages/Register/index.vue?macro=true&vue&type=script&setup=true&lang.ts\"",
      "start": 1719309437312,
      "end": 1719309437313,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          ""
        ],
        "names": [],
        "mappings": "AAAA"
      }
    },
    {
      "name": "nuxt:pages-macros-transform",
      "result": "export { default } from \"C:/Users/mario/Documents/Projekti web/Recepti/Front_domaci_recepti/pages/Register/index.vue?macro=true&vue&type=script&setup=true&lang.ts\"",
      "start": 1719309437312,
      "end": 1719309437313,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          ""
        ],
        "names": [],
        "mappings": "AAAA"
      }
    },
    {
      "name": "nuxt:tree-shake-template",
      "start": 1719309437313,
      "end": 1719309437313,
      "order": "post"
    },
    {
      "name": "nuxt:components-loader",
      "start": 1719309437313,
      "end": 1719309437313,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-composables:transform",
      "start": 1719309437313,
      "end": 1719309437313,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1719309437313,
      "end": 1719309437313,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1719309437313,
      "end": 1719309437313,
      "order": "normal"
    }
  ]
}
