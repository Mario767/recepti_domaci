{"version":3,"file":"index-94a34323.js","sources":["../../../../pages/Admin/index.vue"],"sourcesContent":["<template>\n  <v-row>\n    <div class=\"form-group\">\n      <v-combobox class=\"combobox\" label=\"Vrsta korisnika\" v-model=\"vrstaKorisnika\" :items=\"['Admin', 'Korisnik']\" required @change=\"fetchKorisnici\"></v-combobox>\n      <v-row>\n        <v-text-field v-model=\"korisnickoIme\" label=\"Korisničko ime\" required></v-text-field>\n        <v-btn class=\"btn\" @click=\"pretraziKorisnika\">Pretraži</v-btn>\n      </v-row>\n\n    </div>\n  </v-row>\n\n  <v-data-table :headers=\"headers\" :items=\"korisnici\" class=\"elevation-1\" :loading=\"loading\">\n    <template v-slot:item.action=\"{ item }\">\n      <v-btn class=\"btn\" style=\"background-color: #FF6347; margin-right: 0.1rem\" @click=\"goToRecepti(item)\">Recepti</v-btn>\n      <template v-if=\"vrstaKorisnika !== 'Admin'\">\n        <v-btn class=\"btn\" style=\"margin: 0; margin-right: 0.1rem\" color=\"primary\" @click=\"promoviraj(item.Id)\">Promote</v-btn>\n        <v-btn class=\"btn\" style=\"margin: 0\" color=\"error\" @click=\"izbrisi(item.Id)\">Izbriši</v-btn>\n      </template>\n      <template v-if=\"vrstaKorisnika === 'Admin'\">\n        <v-btn class=\"btn\" style=\"margin-right: 0.5rem\" color=\"error\" @click=\"demote(item.Id)\">Demote</v-btn>\n      </template>\n    </template>\n  </v-data-table>\n\n  <div class=\"pagination\">\n    <button class=\"pagination-button\" v-if=\"page > 1\" @click=\"fetchKorisnici(page - 1)\">Previous</button>\n    <button class=\"pagination-button\" v-if=\"nextPageAvailable\" @click=\"fetchKorisnici(page + 1)\">Next</button>\n  </div>\n\n  <v-snackbar v-model=\"snackbar\" :timeout=\"timeout\" :color=\"snackbarColor\" :style=\"{ bottom: '50px' }\">\n    {{ snackbarMessage }}\n    <v-btn color=\"white\" text @click=\"snackbar = false\" class=\"snackbar-close-btn\">Close</v-btn>\n  </v-snackbar>\n</template>\n\n\n<script>\nimport axios from 'axios';\nimport accountStore from '@/composables/accountStore';\n\ndefinePageMeta({\n  layout: 'admin'\n});\n\nexport default {\n  data() {\n    return {\n      vrstaKorisnika: '',\n      korisnici: [],\n      korisnickoIme: '',\n      headers: [\n        { text: 'Id', value: 'Id' },\n        { text: 'Ime', value: 'Ime' },\n        { text: 'Datum', value: 'Datum' },\n        { text: 'Akcija', value: 'action', sortable: false },\n      ],\n      loading: false,\n      page: 1,\n      nextPageAvailable: false,\n      snackbar: false,\n      snackbarMessage: '',\n      snackbarColor: '',\n      timeout: 3000,\n    };\n  },\n  watch: {\n    vrstaKorisnika() {\n      this.page = 1; // Resetiranje stranice kada se promijeni vrsta korisnika\n      this.fetchKorisnici();\n    },\n  },\n  methods: {\n    goToRecepti(korisnik) {\n      this.$router.push({ path: `/admin/recepti` });\n      accountStore.actions.setKorinsikId(korisnik.Id);\n    },\n    async demote(idKorisnika) {\n      try {\n        const authToken = document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n        const response = await axios.post('http://127.0.0.1:8000/api/adminukloni', { korisnik_id: idKorisnika }, {\n          headers: { Authorization: `Bearer ${authToken}` },\n        });\n        console.log(response.data);\n        this.snackbarMessage = 'Korisniku uspješno skinuta uloga admina.';\n        this.snackbarColor = 'success';\n        this.snackbar = true;\n        this.fetchKorisnici();\n      } catch (error) {\n        console.error(error);\n        this.snackbarMessage = error.response?.data?.message || 'Došlo je do greške.';\n        this.snackbarColor = 'error';\n        this.snackbar = true;\n      }\n    },\n    async izbrisi(idKorisnika) {\n      try {\n        const authToken = document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n        const response = await axios.post('http://127.0.0.1:8000/api/delkorisnik', { korisnik_id: idKorisnika }, {\n          headers: { Authorization: `Bearer ${authToken}` },\n        });\n        console.log(response.data);\n        this.snackbarMessage = 'Korisnik uspješno izbrisan.';\n        this.snackbarColor = 'success';\n        this.snackbar = true;\n        this.fetchKorisnici(); // Osvježite podatke\n      } catch (error) {\n        console.error(error);\n        this.snackbarMessage = error.response?.data?.message || 'Došlo je do greške.';\n        this.snackbarColor = 'error';\n        this.snackbar = true;\n      }\n    },\n    async promoviraj(idKorisnika) {\n      try {\n        const authToken = document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n        const response = await axios.post('http://127.0.0.1:8000/api/adminuloge', { korisnik_id: idKorisnika }, {\n          headers: { Authorization: `Bearer ${authToken}` },\n        });\n        console.log(response.data);\n        this.snackbarMessage = 'Korisnik uspješno promoviran.';\n        this.snackbarColor = 'success';\n        this.snackbar = true;\n        this.fetchKorisnici(); // Osvježite podatke\n      } catch (error) {\n        console.error(error);\n        this.snackbarMessage = error.response?.data?.message || 'Došlo je do greške.';\n        this.snackbarColor = 'error';\n        this.snackbar = true;\n      }\n    },\n    async fetchKorisnici(page) {\n      this.loading = true;\n      this.page = Number(page); // Pretvorite page u broj\n\n      // Ako page nije broj (NaN), postavite ga na 1\n      if (isNaN(this.page)) {\n        this.page = 1;\n      }\n\n      const authToken = document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n      let url = '';\n\n      if (this.vrstaKorisnika === 'Admin') {\n        url = 'http://localhost:8000/api/korisniciadmin';\n      } else {\n        url = 'http://localhost:8000/api/korisnici';\n      }\n\n      try {\n        const response = await axios.get(url, {\n          params: { page: this.page },\n          headers: { Authorization: `Bearer ${authToken}` },\n        });\n        this.korisnici = response.data.data;\n        this.nextPageAvailable = response.data.next_page_url !== null;\n        this.loading = false;\n      } catch (error) {\n        console.error(error);\n        this.snackbarMessage = error.response?.data?.message || 'Došlo je do greške.';\n        this.snackbarColor = 'error';\n        this.snackbar = true;\n        this.loading = false;\n      }\n    },\n    async pretraziKorisnika() {\n      this.page = 1;\n      await this.fetchKorisnici();\n    },\n  },\n  created() {\n    // Dohvat podataka prilikom inicijalizacije\n    this.fetchKorisnici();\n  },\n};\n\n</script>\n\n<style>\n.form-group {\n  margin-bottom: 1rem;\n  margin-left: 5rem;\n  margin-right: 5rem;\n  margin-top: 2rem;\n  width: 38rem;\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n}\n\n.pagination-button {\n  margin-top: 11px;\n  margin-left: 11px;\n  color: white;\n  background-color: #FF6347;\n  border: none;\n  padding: 0.7rem;\n  border-radius: 10%;\n}\n\n.v-snackbar {\n  bottom: 50px !important; /* Pozicioniraj snackbar malo više */\n}\n\n.snackbar-close-btn {\n  margin-left: 6rem; /* Pozicioniraj dugme \"Close\" na desnu stranu */\n}\n\n.combobox{\n  margin-top: 0.5rem;\n  max-width: 200px;\n}\n\n.btn {\n  border: none;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 14px; /* Smanjena veličina teksta */\n  cursor: pointer;\n  margin: 0.6rem;\n}\n\n@media (max-width: 768px) {\n  .btn {\n    font-size: 12px; /* Još manja veličina teksta za manje ekrane */\n    padding: 0.5rem; /* Manji padding za bolju prilagodbu */\n  }\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  margin-top: 1rem; /* Dodan margin za razdvajanje od tablice */\n}\n\n.pagination-button {\n  color: white;\n  background-color: #FF6347;\n  border: none;\n  padding: 0.7rem;\n  border-radius: 10%;\n  margin: 0 0.2rem; /* Manji margin između buttona */\n}\n\n@media (max-width: 768px) {\n  .pagination-button {\n    padding: 0.5rem; /* Manji padding za bolju prilagodbu */\n  }\n}\n\n.v-snackbar {\n  bottom: 50px !important; /* Pozicioniranje snackbara */\n}\n\n.snackbar-close-btn {\n  margin-left: auto; /* Automatski položaj za dugme \"Close\" */\n}\n\n</style>\n"],"names":["_push","_parent","_","_scopeId","_createVNode","_createBlock","_Fragment","_createTextVNode","_toDisplayString"],"mappings":"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"}