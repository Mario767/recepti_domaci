{"version":3,"file":"index-1ad517ff.js","sources":["../../../../pages/Dodajrecept/index.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <h2>Dodaj novi recept</h2>\n    <form @submit.prevent=\"submitForm\">\n      <div class=\"form-group\">\n        <label for=\"naziv_recepta\">Naziv recepta:</label>\n        <input type=\"text\" id=\"naziv_recepta\" v-model=\"nazivRecepta\" maxlength=\"60\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"opis\">Opis:</label>\n        <textarea id=\"opis\" v-model=\"opis\" maxlength=\"1000\" required></textarea>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"slika\">Slika:</label>\n        <input type=\"file\" id=\"slika\" @change=\"handleFileUpload\" accept=\"image/*\" required>\n        <span v-if=\"slikaTooLarge\" style=\"color: red;\">Slika je prevelika (max 5 MB)</span>\n        <span v-if=\"slikaInvalidFormat\" style=\"color: red;\">Neispravan format slike</span>\n      </div>\n      <div class=\"form-group\">\n        <v-combobox\n          label=\"Vrsta jela\"\n          v-model=\"vrstaJela\"\n          :items=\"['Glavno jelo', 'Predjelo', 'Desert']\"\n          required\n        ></v-combobox>\n      </div>\n      <button type=\"submit\" :disabled=\"slikaTooLarge || slikaInvalidFormat\">Spremi recept</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      nazivRecepta: '',\n      opis: '',\n      slika: null,\n      vrstaJela: null,\n      slikaTooLarge: false,\n      slikaInvalidFormat: false\n    };\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      const maxSize = 5 * 1024 * 1024; // 5 MB limit\n      const allowedTypes = ['image/jpeg', 'image/png', 'image/webp']; // Allowed image types\n      if (!file) return;\n\n      if (file.size > maxSize) {\n        this.slikaTooLarge = true;\n        this.slikaInvalidFormat = false;\n        return;\n      }\n\n      if (!allowedTypes.includes(file.type)) {\n        this.slikaInvalidFormat = true;\n        this.slikaTooLarge = false;\n        return;\n      }\n\n      this.slikaTooLarge = false;\n      this.slikaInvalidFormat = false;\n      this.slika = file;\n    },\n    submitForm() {\n      const formData = new FormData();\n      formData.append('naziv_recepta', this.nazivRecepta);\n      formData.append('opis', this.opis);\n      formData.append('slika', this.slika);\n      formData.append('vrstajela', this.vrstaJela);\n\n      const authToken = document.cookie.replace(/(?:(?:^|.*;\\s*)authToken\\s*=\\s*([^;]*).*$)|^.*$/, \"$1\");\n\n      axios.post('http://localhost:8000/api/recepti', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Authorization': `Bearer ${authToken}`\n        }\n      })\n      .then(() => {\n        // Uspješno spremanje recepta, preusmjeri korisnika na /mojirecepti\n        this.$router.push('/mojirecepti');\n      })\n      .catch(error => {\n        console.error('Došlo je do greške prilikom spremanja recepta:', error);\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.form-group {\n  margin-bottom: 1rem;\n}\nlabel {\n  display: block;\n}\ninput[type=\"text\"],\ntextarea {\n  width: 100%;\n  padding: 0.5rem;\n  font-size: 1rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\nbutton[type=\"submit\"] {\n  padding: 0.5rem 1rem;\n  background-color: #FF6347;\n  color: white;\n}\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrIncludeBooleanAttr"],"mappings":";;;;;;;;;;;;;;;;;;;AAkCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,eAAe;AAAA,MACf,oBAAoB;AAAA;EAEvB;AAAA,EACD,SAAS;AAAA,IACP,iBAAiB,OAAO;AACtB,YAAM,OAAO,MAAM,OAAO,MAAM,CAAC;AACjC,YAAM,UAAU,IAAI,OAAO;AAC3B,YAAM,eAAe,CAAC,cAAc,aAAa,YAAY;AAC7D,UAAI,CAAC;AAAM;AAEX,UAAI,KAAK,OAAO,SAAS;AACvB,aAAK,gBAAgB;AACrB,aAAK,qBAAqB;AAC1B;AAAA,MACF;AAEA,UAAI,CAAC,aAAa,SAAS,KAAK,IAAI,GAAG;AACrC,aAAK,qBAAqB;AAC1B,aAAK,gBAAgB;AACrB;AAAA,MACF;AAEA,WAAK,gBAAgB;AACrB,WAAK,qBAAqB;AAC1B,WAAK,QAAQ;AAAA,IACd;AAAA,IACD,aAAa;AACX,YAAM,WAAW,IAAI;AACrB,eAAS,OAAO,iBAAiB,KAAK,YAAY;AAClD,eAAS,OAAO,QAAQ,KAAK,IAAI;AACjC,eAAS,OAAO,SAAS,KAAK,KAAK;AACnC,eAAS,OAAO,aAAa,KAAK,SAAS;AAE3C,YAAM,YAAY,SAAS,OAAO,QAAQ,mDAAmD,IAAI;AAEjG,YAAM,KAAK,qCAAqC,UAAU;AAAA,QACxD,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,iBAAiB,UAAU,SAAS;AAAA,QACtC;AAAA,OACD,EACA,KAAK,MAAM;AAEV,aAAK,QAAQ,KAAK,cAAc;AAAA,OACjC,EACA,MAAM,WAAS;AACd,gBAAQ,MAAM,kDAAkD,KAAK;AAAA,MACvE,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;eA3FOA,eAAAC,WAAA,EAAA,IAAG,MAAK,GAAA,MAAA,CAAA,0PAKwC,MAAY,YAAA,uNAI9B,MAAI,IAAA;MAKrB,MAAa,eAAA;yCAAE,EAAmB,SAAA,MAAA,CAAA,CAAA,wDAAA;AAAA;;;MAClC,MAAkB,oBAAA;yCAAE,EAAmB,SAAA,MAAA,CAAA,CAAA,kDAAA;AAAA;;;;;IAIjD,OAAM;AAAA,gBACG,MAAS;AAAA,uCAAT,MAAS,YAAA;AAAA,IACjB,OAAO,CAAqC,eAAA,YAAA,QAAA;AAAA,IAC7C,UAAA;AAAA;AAG6B,QAAA,8BAAAC,sBAAA,MAAA,iBAAiB,MAAkB,kBAAA,IAAA,cAAA,EAAA,sDAAA;;;;;;;;;"}