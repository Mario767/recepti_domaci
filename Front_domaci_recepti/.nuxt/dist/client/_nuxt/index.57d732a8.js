import{C as v,a as l}from"./accountStore.3470eac0.js";import{a as d}from"./axios.4d564c32.js";import{_ as h,o as n,c as a,F as f,u as b,a as i,t as g,v as u,b as y,q as _}from"./entry.d256b9ad.js";const R=new v,x={props:{recepti:{type:Array,required:!0}},methods:{getImageUrl(r){return"http://127.0.0.1:8000/"+r},goToRecept(r){let e=r.naziv_recepta.replace(/\s+/g,"_");this.$router.push({path:`/News/${e}`}),l.actions.setReceptId(r.recept_id)},deleteRecept(r){const e=R.get("authToken");d.post("http://127.0.0.1:8000/api/obrisirec",{recept_id:r},{headers:{Authorization:`Bearer ${e}`}}).then(o=>{console.log("Recept je uspješno izbrisan:",o),this.$emit("recept-izbrisan")}).catch(o=>{console.error("Došlo je do pogreške prilikom brisanja recepta:",o)})},editRecept(r){l.actions.setReceptId(r),this.$router.push({path:"/uredirecept"})}}},C={class:"card-recepti"},j=["onClick"],z=["src"],$={class:"card-body"},D={class:"card-title"},I={class:"card-buttons"},N=["onClick"],T=["onClick"];function B(r,e,o,k,t,s){return n(),a("div",C,[(n(!0),a(f,null,b(o.recepti,c=>(n(),a("div",{key:c.recept_id,class:"card card-hover",onClick:p=>s.goToRecept(c)},[i("img",{src:s.getImageUrl(c.slika),alt:"Recept slika"},null,8,z),i("div",$,[i("h5",D,g(c.naziv_recepta),1)]),i("div",I,[i("button",{class:"delete-button",onClick:u(p=>s.deleteRecept(c.recept_id),["stop"])},"Izbriši",8,N),i("button",{class:"edit-button",onClick:u(p=>s.editRecept(c.recept_id),["stop"])},"Uredi",8,T)])],8,j))),128))])}const m=h(x,[["render",B],["__scopeId","data-v-f350723b"]]);d.defaults.baseURL="http://127.0.0.1:8000/";const M={components:{Mojirec:m},data(){return{recepti:null,error:null}},mounted(){this.fetchData(1)},methods:{fetchData(r){const e=document.cookie.replace(/(?:(?:^|.*;\s*)authToken\s*=\s*([^;]*).*$)|^.*$/,"$1");d.get(`api/mojirecepti?page=${r}`,{headers:{Authorization:`Bearer ${e}`}}).then(o=>{this.recepti=o.data}).catch(o=>{this.error="Došlo je do greške prilikom dohvata recepata: "+o.message})}}},U={id:"app"},w={class:"pagination"},A={key:0};function V(r,e,o,k,t,s){const c=m;return n(),a("div",U,[y(c,{recepti:t.recepti?t.recepti.data:[],onReceptIzbrisan:e[0]||(e[0]=p=>s.fetchData(t.recepti.current_page))},null,8,["recepti"]),i("div",w,[t.recepti&&t.recepti.current_page>1?(n(),a("button",{key:0,class:"pagination-button",onClick:e[1]||(e[1]=p=>s.fetchData(t.recepti.current_page-1))},"Previous")):_("",!0),t.recepti&&t.recepti.last_page>t.recepti.current_page?(n(),a("button",{key:1,class:"pagination-button",onClick:e[2]||(e[2]=p=>s.fetchData(t.recepti.current_page+1))},"Next")):_("",!0)]),t.error?(n(),a("p",A,g(t.error),1)):_("",!0)])}const S=h(M,[["render",V],["__scopeId","data-v-0ed57142"]]);export{S as default};
